# ğŸŒ WorldSim â€” Adaptive Resource Scarcity & Agent Strategy Simulator

> **A multi-agent reinforcement learning simulation of regional resource dynamics, inter-region negotiation, and emergent survival strategies.**

---

## ğŸ“Œ Overview

WorldSim is a simulation engine that models a set of geographically distinct **regions**, each endowed with finite, depletable resources â€” **water**, **food**, **energy**, and **land**. Autonomous AI agents govern each region and must independently learn strategies for:

- **Survival** â€” maintaining minimum resource thresholds to avoid collapse
- **Growth** â€” expanding productive capacity over simulation cycles
- **Negotiation** â€” forming, sustaining, and breaking trade relationships with other regions

Agents are not pre-programmed with fixed rules. Instead, they learn via **reinforcement learning (RL)**, adapting their strategies in response to the evolving world state, resource scarcity, climatic shocks, and the behavior of neighboring agents.

The simulation is designed to surface **emergent behavior** â€” strategies that arise organically â€” and to enable deep analysis of which approaches prove sustainable, which collapse, and why.

---

## ğŸ¯ Key Features

| Feature | Description |
|---|---|
| ğŸ—ºï¸ **Multi-Region World** | Configurable number of regions, each with unique resource profiles and starting conditions |
| ğŸ“‰ **Resource Depletion** | Resources deplete over time based on agent consumption patterns and population demand |
| ğŸŒ©ï¸ **Climatic Events** | Random and semi-random events (droughts, floods, heatwaves, fertile seasons) alter resource availability |
| ğŸ¤ **Trade & Diplomacy** | Agents can propose, accept, or reject bilateral/multilateral trade agreements |
| ğŸ§  **RL-Driven Agents** | Each regional agent learns via a reward signal tied to survival, growth, and stability metrics |
| ğŸ“Š **Rich Visualization** | Real-time dashboards showing world state, resource flows, agent decisions, and historical trends |
| ğŸ”¬ **Post-Simulation Analysis** | Automated reports on emergent strategies, collapse events, and sustainability metrics |

---

## ğŸ—ï¸ Architecture

```
WorldSim/
â”œâ”€â”€ engine/
â”‚   â”œâ”€â”€ world.py              # World state management, region registry
â”‚   â”œâ”€â”€ region.py             # Region class: resources, population, history
â”‚   â”œâ”€â”€ resource_model.py     # Depletion rates, regeneration, climatic modifiers
â”‚   â””â”€â”€ event_engine.py       # Climatic event scheduler and effects
â”‚
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ base_agent.py         # Abstract RL agent interface
â”‚   â”œâ”€â”€ rl_agent.py           # PPO/DQN-based regional governor agent
â”‚   â”œâ”€â”€ negotiation.py        # Inter-agent trade proposal and response logic
â”‚   â””â”€â”€ reward.py             # Reward function definitions
â”‚
â”œâ”€â”€ simulation/
â”‚   â”œâ”€â”€ runner.py             # Simulation loop orchestrator
â”‚   â”œâ”€â”€ config.py             # World and simulation configuration
â”‚   â””â”€â”€ logger.py             # Timestamped state logging per cycle
â”‚
â”œâ”€â”€ visualization/
â”‚   â”œâ”€â”€ dashboard.py          # Real-time world state dashboard (e.g., Streamlit/Plotly)
â”‚   â”œâ”€â”€ resource_charts.py    # Per-region resource trend charts
â”‚   â”œâ”€â”€ trade_graph.py        # Dynamic trade relationship network graph
â”‚   â””â”€â”€ event_timeline.py     # Climatic event timeline overlay
â”‚
â”œâ”€â”€ analysis/
â”‚   â”œâ”€â”€ strategy_analyzer.py  # Classify and compare emergent agent strategies
â”‚   â”œâ”€â”€ collapse_detector.py  # Identify and explain regional collapse events
â”‚   â””â”€â”€ report_generator.py  # Generate final simulation analysis reports
â”‚
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ ...                   # Unit and integration tests
â”‚
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ config.yaml               # Default simulation configuration
â””â”€â”€ README.md
```

---

## âš™ï¸ Simulation Mechanics

### Resources
Each region tracks four core resources with per-cycle depletion and optional regeneration:

| Resource | Depleted By | Regenerated By |
|---|---|---|
| ğŸ’§ Water | Population consumption, agriculture | Rainfall events, river trade |
| ğŸŒ¾ Food | Population consumption | Farming investment, trade imports |
| âš¡ Energy | Industrial production, heating/cooling | Renewable investment, trade imports |
| ğŸ”ï¸ Land | Urban/agricultural expansion | Not regenerated; finite |

### Agent Action Space
At each simulation cycle, an agent chooses from actions including:
- Allocate resources to **consumption**, **production**, or **storage**
- **Invest** in technology to improve efficiency or unlock renewables
- **Propose a trade** to another region (resource type, quantity, duration)
- **Accept or reject** an incoming trade proposal
- **Embargo** a hostile region

### Reward Signal
Agents are rewarded for:
- âœ… Maintaining resources above survival thresholds
- âœ… Population growth and stability
- âœ… Positive trade balance over time
- âœ… Avoiding resource collapse
- âŒ Penalized for resource depletion, failed negotiations, and regional collapse

### Climatic Events
Events fire stochastically each cycle with configurable probability and severity:
- **Drought** â€” reduces water and food by a regional modifier
- **Flood** â€” destroys land and food stocks; may boost water temporarily
- **Heatwave** â€” spikes energy demand
- **Fertile Season** â€” temporary food and water surplus
- **Resource Windfall** â€” discovery of new energy or mineral deposits

---

## ğŸ¤– Reinforcement Learning Details

- **Algorithm**: Proximal Policy Optimization (PPO) as the default; configurable to DQN or A3C
- **State Space**: Normalized vector of [own resources, neighbor resources (visible), recent events, trade history, cycle number]
- **Action Space**: Discrete + Continuous hybrid (resource allocation continuous; trade/diplomacy discrete)
- **Training**: Agents train in parallel across regions; shared experience replay optional
- **Generalization**: Agents are evaluated on held-out world configurations to test strategy transferability

---

## ğŸ“Š Visualization

The visualization layer is a first-class component of WorldSim:

1. **World Map View** â€” Color-coded map showing real-time resource health of each region
2. **Resource Timelines** â€” Per-region historical charts of all four resources
3. **Trade Network Graph** â€” Live force-directed graph of active trade relationships
4. **Event Timeline** â€” Chronological strip of climatic events overlaid on resource curves
5. **Agent Decision Heatmap** â€” Shows action frequency distributions per agent per phase
6. **Collapse & Survival Report** â€” Visual summary of which regions survived, when, and why

---

## ğŸ”¬ Analysis & Findings

After each simulation run, the analysis module generates a structured report covering:

- **Emergent Strategy Clusters**: Did agents converge on hoarding, trade-dependency, or self-sufficiency?
- **Collapse Autopsy**: What sequence of events and decisions led to regional collapse?
- **Trade Network Stability**: Which trade partnerships lasted? Which were exploitative?
- **Climate Resilience**: Which strategies survived repeated climatic shocks?
- **Real-World Parallels**: Commentary mapping simulation outcomes to documented real-world resource conflict patterns (e.g., water wars, energy embargoes, food aid dependency)

---

## ğŸ”„ Software Development Life Cycle (SDLC)

WorldSim follows a structured SDLC to ensure quality, traceability, and iterative improvement throughout the project.

### Phase 1 â€” ğŸ“‹ Planning

| Item | Detail |
|---|---|
| **Project Goal** | Build a multi-agent RL simulation to model regional resource scarcity and emergent survival strategies |
| **Scope** | Simulation engine, RL agents, trade/diplomacy logic, visualization dashboard, post-run analysis |
| **Timeline** | Sprint-based development aligned with Sitnovate 2026 Hackathon milestones |
| **Team Roles** | RL Engineers, Backend Developers, Visualization Developers, QA & Testing |
| **Tools & Stack** | Python 3.10+, Stable-Baselines3, Streamlit, Plotly, pytest, Git/GitHub |
| **Risk Factors** | RL convergence instability, computational cost of multi-agent training, event randomness reproducibility |

---

### Phase 2 â€” ğŸ“ Requirements Analysis

**Functional Requirements**
- Simulate a configurable number of regions, each with four core resources (water, food, energy, land)
- RL agents must learn resource allocation, trade, and diplomacy strategies autonomously
- Climatic events must fire stochastically and alter regional resource availability
- Visualization layer must display world state, trade networks, and event timelines in real time
- Post-simulation analysis must classify emergent strategies and identify collapse events

**Non-Functional Requirements**
- Simulation must be deterministic when a fixed seed is provided (reproducibility)
- Dashboard must render updates within one simulation cycle latency
- Codebase must maintain >80% unit test coverage on core engine and agent logic
- Configuration must be fully externalizable via `config.yaml` (no hardcoded simulation parameters)

---

### Phase 3 â€” ğŸ—ï¸ System Design

**High-Level Design**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Simulation Runner                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  World State â”‚  â”‚  RL Agents   â”‚  â”‚ Event Engine â”‚  â”‚
â”‚  â”‚  (regions,   â”‚â—„â”€â”¤  (PPO/DQN)  â”œâ”€â–ºâ”‚  (climatic   â”‚  â”‚
â”‚  â”‚   resources) â”‚  â”‚              â”‚  â”‚   shocks)    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                 â”‚                             â”‚
â”‚         â–¼                 â–¼                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚     Logger / State Store     â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Visualizationâ”‚    â”‚ Analysis Module â”‚
â”‚  Dashboard   â”‚    â”‚ (reports, stats)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Low-Level Design Highlights**
- `Region` class encapsulates per-cycle resource deltas, population state, and trade history
- `RLAgent` wraps Stable-Baselines3 policy with a custom observation/action space adapter
- `NegotiationModule` implements a structured proposalâ€“counter-proposalâ€“accept/reject handshake
- `EventEngine` uses a weighted random scheduler with per-event severity distributions
- `Logger` writes timestamped JSON snapshots for full post-run replay

---

### Phase 4 â€” ğŸ’» Implementation

Development is organized into modular sprints:

| Sprint | Focus Area | Key Deliverables |
|---|---|---|
| **Sprint 1** | Core Engine | `world.py`, `region.py`, `resource_model.py` â€” basic resource depletion loop |
| **Sprint 2** | Event System | `event_engine.py` â€” climatic event scheduler and effect application |
| **Sprint 3** | RL Agents | `rl_agent.py`, `reward.py` â€” PPO agent with survival/growth reward signal |
| **Sprint 4** | Trade & Diplomacy | `negotiation.py` â€” proposal handshake, trade acceptance logic |
| **Sprint 5** | Visualization | `dashboard.py`, `resource_charts.py`, `trade_graph.py` â€” Streamlit/Plotly dashboards |
| **Sprint 6** | Analysis | `strategy_analyzer.py`, `collapse_detector.py`, `report_generator.py` |
| **Sprint 7** | Integration & Polish | End-to-end runner, config externalization, documentation |

**Coding Standards**
- PEP 8 style enforced via `flake8`
- Type hints required on all public functions
- Docstrings follow Google style format
- All simulation parameters sourced from `config.yaml` â€” no magic numbers in code

---

### Phase 5 â€” ğŸ§ª Testing

| Test Type | Scope | Tooling |
|---|---|---|
| **Unit Tests** | Resource depletion arithmetic, event effect calculations, reward function correctness | `pytest` |
| **Integration Tests** | Agentâ€“world interaction, trade handshake end-to-end, logger output validity | `pytest` |
| **Determinism Tests** | Simulation produces identical output for identical seeds across runs | `pytest` |
| **Performance Tests** | Simulation completes 500 cycles with 8 regions within acceptable wall-clock time | Manual / CI timer |
| **Visualization Tests** | Dashboard renders without runtime errors on sample log data | Manual smoke test |

Run all tests:
```bash
pytest tests/ -v --tb=short
```

**Coverage Target**: â‰¥ 80% on `engine/`, `agents/`, and `simulation/` modules.

---

### Phase 6 â€” ğŸš¢ Deployment

WorldSim is primarily a research simulation tool deployed locally or on a shared compute node:

**Local Deployment**
```bash
git clone https://github.com/sharvayuzade/Sitnovate26.git
cd Sitnovate26
pip install -r requirements.txt
python simulation/runner.py --config config.yaml --cycles 500 --regions 8
```

**Dashboard Deployment**
```bash
streamlit run visualization/dashboard.py
```

**CI/CD Pipeline (GitHub Actions)**
- On every pull request: run `flake8` lint check + full `pytest` suite
- On merge to `main`: generate a sample simulation report as a build artifact
- Environment: Python 3.10, Ubuntu latest runner

---

### Phase 7 â€” ğŸ”§ Maintenance & Iteration

| Activity | Frequency | Owner |
|---|---|---|
| Bug triage and hotfixes | As needed | All team members |
| RL hyperparameter tuning | Per experiment run | RL Engineers |
| New climatic event types | Feature sprints | Backend Developers |
| Dashboard UX improvements | Feature sprints | Visualization Developers |
| Dependency upgrades (SB3, Streamlit) | Quarterly | Team Lead |
| Post-hackathon community contributions | Open | Community / Contributors |

**Versioning Strategy**: Semantic versioning (`MAJOR.MINOR.PATCH`) tracked via Git tags.  
**Feedback Loop**: Simulation analysis findings feed back into reward function design and event probability tuning.

---

## ğŸš€ Getting Started

### Prerequisites
- Python 3.10+
- `pip` or `conda`

### Installation

```bash
git clone https://github.com/sharvayuzade/Sitnovate26.git
cd Sitnovate26
pip install -r requirements.txt
```

### Running a Simulation

```bash
python simulation/runner.py --config config.yaml --cycles 500 --regions 8
```

### Launching the Dashboard

```bash
streamlit run visualization/dashboard.py
```

### Running Analysis on a Saved Run

```bash
python analysis/report_generator.py --run-log logs/run_20260226.json
```

---

## ğŸ› ï¸ Configuration (`config.yaml`)

```yaml
world:
  num_regions: 8
  seed: 42

resources:
  initial_range:
    water: [50, 100]
    food: [40, 90]
    energy: [30, 80]
    land: [60, 100]
  depletion_rate_per_cycle: 0.02

events:
  drought_probability: 0.05
  flood_probability: 0.03
  heatwave_probability: 0.04
  fertile_season_probability: 0.06

agents:
  algorithm: PPO
  learning_rate: 0.0003
  gamma: 0.99
  episodes: 1000

simulation:
  cycles_per_episode: 200
  log_interval: 10
```

---

## ğŸ“ˆ Evaluation Metrics

| Metric | Description |
|---|---|
| **Survival Rate** | Fraction of regions alive at end of simulation |
| **Mean Resource Level** | Average resource stock across all regions and cycles |
| **Trade Volume** | Total inter-region resource flows per cycle |
| **Collapse Events** | Number and timing of regional collapses |
| **Gini Coefficient** | Resource inequality across regions over time |
| **Strategy Entropy** | Diversity of agent strategies (high = diverse, low = convergent) |

---

## ğŸ§ª Testing

```bash
pytest tests/ -v
```

Tests cover:
- Resource depletion arithmetic
- Event application correctness
- Agent action validity
- Trade proposal handshake logic
- Simulation runner determinism (fixed seed)

---

## ğŸ¤ Team & Contributions

This project is developed for **Sitnovate 2026** Hackathon.

To contribute:
1. Fork the repository
2. Create a feature branch (`git checkout -b feature/your-feature`)
3. Commit your changes (`git commit -m 'Add feature'`)
4. Push to the branch (`git push origin feature/your-feature`)
5. Open a Pull Request

---

## ğŸ“„ License

This project is licensed under the [MIT License](LICENSE).

---

## ğŸ™ Acknowledgements

- Inspired by research in multi-agent systems, resource economics, and climate adaptation modeling
- RL framework built on [Stable-Baselines3](https://stable-baselines3.readthedocs.io/)
- Visualization powered by [Streamlit](https://streamlit.io/) and [Plotly](https://plotly.com/)
